{
  "arn": "arn:aws:cloudformation:us-west-2::type/resource/AWS-ImageBuilder-ImagePipeline",
  "type": "AWS::ImageBuilder::ImagePipeline",
  "time": "2022-09-28T02:08:38.118Z",
  "schema": {
    "additionalProperties": false,
    "createOnlyProperties": [
      "/properties/Name"
    ],
    "definitions": {
      "ImageTestsConfiguration": {
        "additionalProperties": false,
        "description": "Image tests configuration.",
        "properties": {
          "ImageTestsEnabled": {
            "description": "Defines if tests should be executed when building this image.",
            "type": "boolean"
          },
          "TimeoutMinutes": {
            "description": "The maximum time in minutes that tests are permitted to run.",
            "maximum": 1440,
            "minimum": 60,
            "type": "integer"
          }
        },
        "type": "object"
      },
      "Schedule": {
        "additionalProperties": false,
        "description": "The schedule of the image pipeline.",
        "properties": {
          "PipelineExecutionStartCondition": {
            "description": "The condition configures when the pipeline should trigger a new image build.",
            "enum": [
              "EXPRESSION_MATCH_ONLY",
              "EXPRESSION_MATCH_AND_DEPENDENCY_UPDATES_AVAILABLE"
            ],
            "type": "string"
          },
          "ScheduleExpression": {
            "description": "The expression determines how often EC2 Image Builder evaluates your pipelineExecutionStartCondition.",
            "type": "string"
          }
        },
        "type": "object"
      }
    },
    "description": "Resource schema for AWS::ImageBuilder::ImagePipeline",
    "handlers": {
      "create": {
        "permissions": [
          "iam:GetRole",
          "iam:CreateServiceLinkedRole",
          "imagebuilder:TagResource",
          "imagebuilder:GetImagePipeline",
          "imagebuilder:GetImageRecipe",
          "imagebuilder:GetInfrastructureConfiguration",
          "imagebuilder:GetDistributionConfiguration",
          "imagebuilder:CreateImagePipeline"
        ]
      },
      "delete": {
        "permissions": [
          "imagebuilder:UnTagResource",
          "imagebuilder:GetImagePipeline",
          "imagebuilder:DeleteImagePipeline"
        ]
      },
      "list": {
        "permissions": [
          "imagebuilder:ListImagePipelines"
        ]
      },
      "read": {
        "permissions": [
          "imagebuilder:GetImagePipeline"
        ]
      },
      "update": {
        "permissions": [
          "imagebuilder:GetImagePipeline",
          "imagebuilder:UpdateImagePipeline"
        ]
      }
    },
    "oneOf": [
      {
        "required": [
          "Name",
          "ContainerRecipeArn",
          "InfrastructureConfigurationArn"
        ]
      },
      {
        "required": [
          "Name",
          "ImageRecipeArn",
          "InfrastructureConfigurationArn"
        ]
      }
    ],
    "primaryIdentifier": [
      "/properties/Arn"
    ],
    "properties": {
      "Arn": {
        "description": "The Amazon Resource Name (ARN) of the image pipeline.",
        "type": "string"
      },
      "ContainerRecipeArn": {
        "description": "The Amazon Resource Name (ARN) of the container recipe that defines how images are configured and tested.",
        "type": "string"
      },
      "Description": {
        "description": "The description of the image pipeline.",
        "type": "string"
      },
      "DistributionConfigurationArn": {
        "description": "The Amazon Resource Name (ARN) of the distribution configuration associated with this image pipeline.",
        "type": "string"
      },
      "EnhancedImageMetadataEnabled": {
        "description": "Collects additional information about the image being created, including the operating system (OS) version and package list.",
        "type": "boolean"
      },
      "ImageRecipeArn": {
        "description": "The Amazon Resource Name (ARN) of the image recipe that defines how images are configured, tested, and assessed.",
        "type": "string"
      },
      "ImageTestsConfiguration": {
        "$ref": "#/definitions/ImageTestsConfiguration",
        "description": "The image tests configuration of the image pipeline."
      },
      "InfrastructureConfigurationArn": {
        "description": "The Amazon Resource Name (ARN) of the infrastructure configuration associated with this image pipeline.",
        "type": "string"
      },
      "Name": {
        "description": "The name of the image pipeline.",
        "type": "string"
      },
      "Schedule": {
        "$ref": "#/definitions/Schedule",
        "description": "The schedule of the image pipeline."
      },
      "Status": {
        "description": "The status of the image pipeline.",
        "enum": [
          "DISABLED",
          "ENABLED"
        ],
        "type": "string"
      },
      "Tags": {
        "additionalProperties": false,
        "description": "The tags of this image pipeline.",
        "patternProperties": {
          ".{1,}": {
            "type": "string"
          }
        },
        "type": "object"
      }
    },
    "readOnlyProperties": [
      "/properties/Arn"
    ],
    "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-imagebuilder.git",
    "typeName": "AWS::ImageBuilder::ImagePipeline"
  }
}